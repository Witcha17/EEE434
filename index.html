<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EEE434 Member Board | KMUTT</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Light Mode (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô) */
        :root {
            --kmutt-orange: #e74010;
            --main-text: #333333;
            --sub-text: #666666;
            --bg-body: #f0f2f5;
            --bg-card: #ffffff;
            --bg-header: #ffffff;
            --bg-input: #ffffff;
            --border-color: #ddd;
            --shadow-color: rgba(0,0,0,0.1);
            --modal-overlay: rgba(0,0,0,0.6);
            --instructor-bg: linear-gradient(135deg, #ffffff 0%, #fff5f2 100%);
        }

        /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dark Mode */
        [data-theme="dark"] {
            --main-text: #e0e0e0;
            --sub-text: #b0b0b0;
            --bg-body: #121212;
            --bg-card: #1e1e1e;
            --bg-header: #1e1e1e;
            --bg-input: #2d2d2d;
            --border-color: #444;
            --shadow-color: rgba(0,0,0,0.5);
            --modal-overlay: rgba(0,0,0,0.8);
            --instructor-bg: linear-gradient(135deg, #1e1e1e 0%, #2a1a1a 100%);
        }

        body { font-family: 'Kanit', sans-serif; background-color: var(--bg-body); margin: 0; padding: 0; color: var(--main-text); transition: background-color 0.3s, color 0.3s; }
        
        /* Header */
        header { background-color: var(--bg-header); border-bottom: 5px solid var(--kmutt-orange); padding: 15px 5%; display: flex; align-items: center; justify-content: flex-start; gap: 30px; box-shadow: 0 2px 10px var(--shadow-color); position: sticky; top: 0; z-index: 1000; transition: background-color 0.3s; }
        .logo-container { display: flex; align-items: center; gap: 25px; }
        .logo-kmutt, .logo-dept { height: 90px; width: auto; object-fit: contain; }
        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏ß‡∏à‡∏≤‡∏á‡πÜ ‡πÉ‡∏´‡πâ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÉ‡∏ô Dark Mode ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô (Optional) */
        [data-theme="dark"] .logo-kmutt, [data-theme="dark"] .logo-dept { background: rgba(255,255,255,0.1); padding: 5px; border-radius: 8px; }

        .header-text { border-left: 2px solid var(--border-color); padding-left: 25px; }
        .header-text h1 { margin: 0; font-size: 1.35rem; color: var(--kmutt-orange); letter-spacing: 0.5px; }
        .header-text p { margin: 5px 0 0 0; font-size: 1rem; color: var(--sub-text); font-weight: 300; }
        
        /* Layout */
        .container { max-width: 1300px; margin: 50px auto; padding: 0 20px; }
        .section-title { text-align: left; font-size: 1.8rem; margin-bottom: 30px; color: var(--main-text); border-left: 8px solid var(--kmutt-orange); padding-left: 15px; }
        
        /* Instructor Box */
        .instructor-box { background: var(--instructor-bg); border-radius: 30px; padding: 40px; display: flex; align-items: center; gap: 50px; box-shadow: 0 15px 35px var(--shadow-color); margin-bottom: 60px; border: 1px solid rgba(231, 64, 16, 0.1); }
        .instructor-img { width: 300px; height: 300px; border-radius: 25px; object-fit: cover; box-shadow: 0 10px 25px rgba(0,0,0,0.15); border: 6px solid var(--bg-card); flex-shrink: 0; }
        .instructor-label { display: inline-block; background: var(--kmutt-orange); color: white; padding: 5px 20px; border-radius: 50px; font-size: 0.9rem; margin-bottom: 15px; font-weight: 500; letter-spacing: 1px; }
        .instructor-info h2 { font-size: 2.4rem; margin: 0 0 10px 0; color: var(--main-text); }
        .instructor-info p { font-size: 1.3rem; color: var(--kmutt-orange); margin: 0; font-weight: 400; }
        
        /* Student Grid */
        .student-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 25px; }
        .student-card { background: var(--bg-card); border-radius: 20px; overflow: hidden; transition: all 0.4s; box-shadow: 0 5px 15px var(--shadow-color); border: 1px solid var(--border-color); cursor: pointer; }
        .student-card:hover { transform: translateY(-12px); box-shadow: 0 15px 30px rgba(231, 64, 16, 0.2); border-color: var(--kmutt-orange); }
        .student-img { width: 100%; height: 230px; object-fit: cover; }
        .student-info { padding: 15px; text-align: center; background: var(--bg-card); transition: background 0.3s; }
        .student-no { font-size: 0.8rem; color: var(--kmutt-orange); font-weight: 600; text-transform: uppercase; }

        /* Modal Styles */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: var(--modal-overlay); backdrop-filter: blur(5px); }
        .modal-content { background-color: var(--bg-card); margin: 5% auto; padding: 30px; border-radius: 20px; width: 90%; max-width: 500px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); animation: slideIn 0.3s ease-out; box-sizing: border-box; color: var(--main-text); }
        @keyframes slideIn { from {transform: translateY(-50px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }
        .close { color: var(--sub-text); float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover { color: var(--kmutt-orange); }
        .modal-header { border-bottom: 2px solid var(--border-color); padding-bottom: 15px; margin-bottom: 20px; }
        .modal-header h3 { margin: 0; color: var(--kmutt-orange); }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 10px; font-weight: 500; color: var(--main-text); }
        
        .radio-group { display: flex; gap: 20px; }
        .radio-option { display: flex; align-items: center; gap: 8px; cursor: pointer; background: var(--bg-input); padding: 10px 20px; border-radius: 10px; border: 1px solid var(--border-color); transition: all 0.2s; flex: 1; justify-content: center; color: var(--main-text); }
        .radio-option:hover { border-color: var(--kmutt-orange); background: rgba(231, 64, 16, 0.05); }
        .radio-option input[type="radio"] { accent-color: var(--kmutt-orange); transform: scale(1.2); }
        
        textarea { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid var(--border-color); font-family: 'Kanit', sans-serif; resize: vertical; min-height: 100px; box-sizing: border-box; background-color: var(--bg-input); color: var(--main-text); }
        textarea:focus { outline: none; border-color: var(--kmutt-orange); }
        .submit-btn { width: 100%; padding: 15px; background-color: var(--kmutt-orange); color: white; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 500; cursor: pointer; transition: background 0.2s; font-family: 'Kanit', sans-serif; }
        .submit-btn:hover { background-color: #c9350b; }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background-color: var(--kmutt-orange);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: none;
            z-index: 3000;
            transition: transform 0.3s;
        }
        .theme-toggle:hover { transform: scale(1.1); }

        /* CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß */
        .student-card.submitted { opacity: 0.6; filter: grayscale(100%); pointer-events: none; cursor: not-allowed; position: relative; }
        .student-card.submitted::after { content: "‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: var(--kmutt-orange); color: white; padding: 8px 16px; border-radius: 50px; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 10; }

        /* ================= RESPONSIVE DESIGN ================= */
        @media (max-width: 768px) {
            header { flex-direction: column; text-align: center; gap: 15px; padding: 15px; }
            .logo-container { justify-content: center; width: 100%; }
            .logo-kmutt, .logo-dept { height: 60px; }
            .header-text { border-left: none; padding-left: 0; border-top: 1px solid var(--border-color); padding-top: 15px; width: 100%; }
            .container { margin: 20px auto; padding: 0 15px; }
            .section-title { font-size: 1.5rem; margin-bottom: 20px; padding-left: 10px; border-left-width: 5px; }
            .instructor-box { flex-direction: column; text-align: center; padding: 25px; gap: 20px; margin-bottom: 40px; }
            .instructor-img { width: 200px; height: 200px; margin: 0 auto; }
            .instructor-info div { margin: 20px auto 0 auto !important; }
            .student-grid { grid-template-columns: repeat(2, 1fr); gap: 15px; }
            .student-img { height: 160px; }
            .modal-content { margin: 20% auto; padding: 20px; width: 90%; }
        }

        @media (max-width: 480px) {
            .instructor-img { width: 150px; height: 150px; }
            .student-grid { gap: 10px; }
            .student-img { height: 140px; }
            .theme-toggle { bottom: 20px; right: 20px; width: 45px; height: 45px; font-size: 20px; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo-container">
        <img src="https://i.postimg.cc/Z5gXby9G/KMUTT-CI-Semi-Logo-normal-full.png" alt="KMUTT Logo" class="logo-kmutt">
        <img src="https://i.postimg.cc/Qx2b4gRt/Electrical.png" alt="Electrical Dept" class="logo-dept">
    </div>
    <div class="header-text">
        <h1>EEE434 ENERGY CONSERVATION AND MANAGEMENT</h1>
        <p>Department of Electrical Engineering, KMUTT</p>
    </div>
</header>

<div class="container">
    <h2 class="section-title">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô</h2>
    <div class="instructor-box">
        <img src="https://i.postimg.cc/RV7kT0D8/image.png" alt="Instructor" class="instructor-img">
        <div class="instructor-info">
            <span class="instructor-label">COURSE INSTRUCTOR</span>
            <h2>‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ò‡∏ß‡∏±‡∏ä‡∏ä‡∏±‡∏¢ ‡∏ä‡∏¢‡∏≤‡∏ß‡∏ô‡∏¥‡∏ä</h2>
            <p>‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô</p>
            <div style="margin-top: 25px; height: 5px; width: 80px; background: var(--kmutt-orange); border-radius: 10px;"></div>
        </div>
    </div>

    <div style="text-align: right; margin-bottom: 20px;">
        <button onclick="adminReset()" style="background: var(--bg-card); color: var(--sub-text); border:1px solid var(--border-color); padding: 8px 15px; border-radius: 5px; cursor: pointer; font-family: 'Kanit'; font-size: 0.8rem;">
            ‚öôÔ∏è Reset Data (Admin Only)
        </button>
    </div>

    <h2 class="section-title">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏Ñ‡∏•‡∏≤‡∏™ <span style="font-size: 1rem; color: var(--sub-text); font-weight: normal; display: block; margin-top:5px;">(‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö)</span></h2>
    <div class="student-grid" id="studentGrid">
        <div class="student-card" onclick="openModal('Member 01', 'https://i.postimg.cc/52rz0fSL/1.png')"><img src="https://i.postimg.cc/52rz0fSL/1.png" class="student-img"><div class="student-info"><div class="student-no">Member 01</div></div></div>
        <div class="student-card" onclick="openModal('Member 02', 'https://i.postimg.cc/fRPdLMfS/2.jpg')"><img src="https://i.postimg.cc/fRPdLMfS/2.jpg" class="student-img"><div class="student-info"><div class="student-no">Member 02</div></div></div>
        <div class="student-card" onclick="openModal('Member 03', 'https://i.postimg.cc/y8GRd7y0/3.png')"><img src="https://i.postimg.cc/y8GRd7y0/3.png" class="student-img"><div class="student-info"><div class="student-no">Member 03</div></div></div>
        <div class="student-card" onclick="openModal('Member 04', 'https://i.postimg.cc/K8WTzmD7/4.png')"><img src="https://i.postimg.cc/K8WTzmD7/4.png" class="student-img"><div class="student-info"><div class="student-no">Member 04</div></div></div>
        <div class="student-card" onclick="openModal('Member 05', 'https://i.postimg.cc/HkNMxT9Q/5.png')"><img src="https://i.postimg.cc/HkNMxT9Q/5.png" class="student-img"><div class="student-info"><div class="student-no">Member 05</div></div></div>
        <div class="student-card" onclick="openModal('Member 06', 'https://i.postimg.cc/HkNMxT9t/6.png')"><img src="https://i.postimg.cc/HkNMxT9t/6.png" class="student-img"><div class="student-info"><div class="student-no">Member 06</div></div></div>
        <div class="student-card" onclick="openModal('Member 07', 'https://i.postimg.cc/4x0cdXQ5/7.png')"><img src="https://i.postimg.cc/4x0cdXQ5/7.png" class="student-img"><div class="student-info"><div class="student-no">Member 07</div></div></div>
        <div class="student-card" onclick="openModal('Member 08', 'https://i.postimg.cc/6pPZ3Bfz/8.png')"><img src="https://i.postimg.cc/6pPZ3Bfz/8.png" class="student-img"><div class="student-info"><div class="student-no">Member 08</div></div></div>
        <div class="student-card" onclick="openModal('Member 09', 'https://i.postimg.cc/FH6SRhVP/9.png')"><img src="https://i.postimg.cc/FH6SRhVP/9.png" class="student-img"><div class="student-info"><div class="student-no">Member 09</div></div></div>
        <div class="student-card" onclick="openModal('Member 10', 'https://i.postimg.cc/mgn9DTym/10.png')"><img src="https://i.postimg.cc/mgn9DTym/10.png" class="student-img"><div class="student-info"><div class="student-no">Member 10</div></div></div>
        <div class="student-card" onclick="openModal('Member 11', 'https://i.postimg.cc/XYP5JnkQ/11.png')"><img src="https://i.postimg.cc/XYP5JnkQ/11.png" class="student-img"><div class="student-info"><div class="student-no">Member 11</div></div></div>
        <div class="student-card" onclick="openModal('Member 12', 'https://i.postimg.cc/NjnXMQkP/12.png')"><img src="https://i.postimg.cc/NjnXMQkP/12.png" class="student-img"><div class="student-info"><div class="student-no">Member 12</div></div></div>
        <div class="student-card" onclick="openModal('Member 13', 'https://i.postimg.cc/pLSjTPJc/13.png')"><img src="https://i.postimg.cc/pLSjTPJc/13.png" class="student-img"><div class="student-info"><div class="student-no">Member 13</div></div></div>
        <div class="student-card" onclick="openModal('Member 14', 'https://i.postimg.cc/nhWmznGP/14.png')"><img src="https://i.postimg.cc/nhWmznGP/14.png" class="student-img"><div class="student-info"><div class="student-no">Member 14</div></div></div>
        <div class="student-card" onclick="openModal('Member 15', 'https://i.postimg.cc/sDYkJ2NL/15.png')"><img src="https://i.postimg.cc/sDYkJ2NL/15.png" class="student-img"><div class="student-info"><div class="student-no">Member 15</div></div></div>
        <div class="student-card" onclick="openModal('Member 16', 'https://i.postimg.cc/JhBkHSpQ/16.png')"><img src="https://i.postimg.cc/JhBkHSpQ/16.png" class="student-img"><div class="student-info"><div class="student-no">Member 16</div></div></div>
        <div class="student-card" onclick="openModal('Member 17', 'https://i.postimg.cc/25BZLg0w/17.png')"><img src="https://i.postimg.cc/25BZLg0w/17.png" class="student-img"><div class="student-info"><div class="student-no">Member 17</div></div></div>
        <div class="student-card" onclick="openModal('Member 18', 'https://i.postimg.cc/6QGv4FMz/18.png')"><img src="https://i.postimg.cc/6QGv4FMz/18.png" class="student-img"><div class="student-info"><div class="student-no">Member 18</div></div></div>
        <div class="student-card" onclick="openModal('Member 19', 'https://i.postimg.cc/Pq8wv0SV/19.png')"><img src="https://i.postimg.cc/Pq8wv0SV/19.png" class="student-img"><div class="student-info"><div class="student-no">Member 19</div></div></div>
        <div class="student-card" onclick="openModal('Member 20', 'https://i.postimg.cc/rptrR7fv/20.png')"><img src="https://i.postimg.cc/rptrR7fv/20.png" class="student-img"><div class="student-info"><div class="student-no">Member 20</div></div></div>
        <div class="student-card" onclick="openModal('Member 21', 'https://i.postimg.cc/zfRgH4x6/21.png')"><img src="https://i.postimg.cc/zfRgH4x6/21.png" class="student-img"><div class="student-info"><div class="student-no">Member 21</div></div></div>
        <div class="student-card" onclick="openModal('Member 22', 'https://i.postimg.cc/SKzMYHg5/22.png')"><img src="https://i.postimg.cc/SKzMYHg5/22.png" class="student-img"><div class="student-info"><div class="student-no">Member 22</div></div></div>
        <div class="student-card" onclick="openModal('Member 23', 'https://i.postimg.cc/6QGv4FHs/23.png')"><img src="https://i.postimg.cc/6QGv4FHs/23.png" class="student-img"><div class="student-info"><div class="student-no">Member 23</div></div></div>
        <div class="student-card" onclick="openModal('Member 24', 'https://i.postimg.cc/LsZ1gGyF/24.png')"><img src="https://i.postimg.cc/LsZ1gGyF/24.png" class="student-img"><div class="student-info"><div class="student-no">Member 24</div></div></div>
        <div class="student-card" onclick="openModal('Member 25', 'https://i.postimg.cc/LsZ1gGyM/25.png')"><img src="https://i.postimg.cc/LsZ1gGyM/25.png" class="student-img"><div class="student-info"><div class="student-no">Member 25</div></div></div>
        <div class="student-card" onclick="openModal('Member 26', 'https://i.postimg.cc/XvyCBt2b/26.png')"><img src="https://i.postimg.cc/XvyCBt2b/26.png" class="student-img"><div class="student-info"><div class="student-no">Member 26</div></div></div>
        <div class="student-card" onclick="openModal('Member 27', 'https://i.postimg.cc/xdbzNBsQ/27.png')"><img src="https://i.postimg.cc/xdbzNBsQ/27.png" class="student-img"><div class="student-info"><div class="student-no">Member 27</div></div></div>
        <div class="student-card" onclick="openModal('Member 28', 'https://i.postimg.cc/1zNqVbW9/28.png')"><img src="https://i.postimg.cc/1zNqVbW9/28.png" class="student-img"><div class="student-info"><div class="student-no">Member 28</div></div></div>
        <div class="student-card" onclick="openModal('Member 29', 'https://i.postimg.cc/wBsmRnWx/29.png')"><img src="https://i.postimg.cc/wBsmRnWx/29.png" class="student-img"><div class="student-info"><div class="student-no">Member 29</div></div></div>
        <div class="student-card" onclick="openModal('Member 30', 'https://i.postimg.cc/SsFz6V5b/30.png')"><img src="https://i.postimg.cc/SsFz6V5b/30.png" class="student-img"><div class="student-info"><div class="student-no">Member 30</div></div></div>
        <div class="student-card" onclick="openModal('Member 31', 'https://i.postimg.cc/qRVCsQYT/31.png')"><img src="https://i.postimg.cc/qRVCsQYT/31.png" class="student-img"><div class="student-info"><div class="student-no">Member 31</div></div></div>
    </div>
</div>

<footer style="text-align: center; padding: 60px 0; color: var(--sub-text); font-size: 0.8rem;">
    ¬© 2026 EEE434 KMUTT. All Rights Reserved.
</footer>

<button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">
    üåô
</button>

<div id="answerModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <div class="modal-header">
            <h3>‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</h3>
            <p id="studentNameDisplay" style="color: var(--sub-text); margin-top: 5px;">Member Name</p>
        </div>
        
        <form id="submissionForm" onsubmit="submitAnswer(event)">
            <input type="hidden" id="studentIdInput">
            <input type="hidden" id="studentImgInput">
            <div class="form-group">
                <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</label>
                <div class="radio-group">
                    <label class="radio-option"><input type="radio" name="tf_answer" value="True" required> ‡∏ñ‡∏π‡∏Å (True)</label>
                    <label class="radio-option"><input type="radio" name="tf_answer" value="False"> ‡∏ú‡∏¥‡∏î (False)</label>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° / ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•</label>
                <textarea id="textAnswer" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
            </div>
            <button type="submit" class="submit-btn">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        </form>
    </div>
</div>

<script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, push, onValue, set, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // --- üî¥ ‡∏ô‡∏≥ Config ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏°‡∏≤‡πÅ‡∏õ‡∏∞‡∏ó‡∏±‡∏ö‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ---
    const firebaseConfig = {
              apiKey: "AIzaSyCOO20iOMb2bWWcUoqmq3OXE2TtbSgG1ik",
              authDomain: "eee434-project.firebaseapp.com",
              databaseURL: "https://eee434-project-default-rtdb.asia-southeast1.firebasedatabase.app",
              projectId: "eee434-project",
              storageBucket: "eee434-project.firebasestorage.app",
              messagingSenderId: "691440469916",
              appId: "1:691440469916:web:c7bb0dd04255fd4821aa59"
    };
    // ----------------------------------------------------

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const dbRef = ref(db, 'responses'); // ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô Database

    // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    let allData = [];

    // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Realtime ---
    // ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Database ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
    onValue(dbRef, (snapshot) => {
        const data = snapshot.val();
        // ‡πÅ‡∏õ‡∏•‡∏á Object ‡πÄ‡∏õ‡πá‡∏ô Array
        allData = data ? Object.values(data) : [];
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        updateGridStatus();
    });

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î
    window.updateGridStatus = function() {
        let submittedNames = allData.map(item => item.name);
        let cards = document.querySelectorAll('.student-card');
        
        cards.forEach(card => {
            let nameInCard = card.querySelector('.student-no').innerText;
            if (submittedNames.includes(nameInCard)) {
                card.classList.add('submitted');
                card.onclick = null;
            } else {
                card.classList.remove('submitted');
                // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ onclick ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö addEventListener ‡∏´‡∏£‡∏∑‡∏≠ set attribute ‡πÉ‡∏´‡∏°‡πà)
                // ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï onclick ‡∏ú‡πà‡∏≤‡∏ô HTML attribute
                let imgUrl = card.querySelector('img').src;
                card.setAttribute('onclick', `openModal('${nameInCard}', '${imgUrl}')`);
            }
        });
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î Modal (‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏ö‡∏ö window ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ HTML ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ type="module")
    window.openModal = function(name, img) {
        if (allData.some(item => item.name === name)) {
            alert("‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß!");
            return;
        }
        document.getElementById('answerModal').style.display = 'block';
        document.getElementById('studentNameDisplay').innerText = '‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ' + name;
        document.getElementById('studentIdInput').value = name;
        document.getElementById('studentImgInput').value = img;
        document.getElementById('submissionForm').reset();
    }

    window.closeModal = function() {
        document.getElementById('answerModal').style.display = 'none';
    }

    // ‡∏õ‡∏¥‡∏î Modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å
    window.onclick = function(event) {
        if (event.target == document.getElementById('answerModal')) closeModal();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö (‡∏™‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô Cloud)
    window.submitAnswer = function(event) {
        event.preventDefault();
        const name = document.getElementById('studentIdInput').value;

        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ã‡πâ‡∏≥‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö
        if (allData.some(item => item.name === name)) {
            alert("‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏£‡∏≠‡∏Å");
            closeModal();
            return;
        }

        const img = document.getElementById('studentImgInput').value;
        const choice = document.querySelector('input[name="tf_answer"]:checked').value;
        const note = document.getElementById('textAnswer').value;
        const timestamp = new Date().getTime();

        const newData = {
            name: name,
            img: img,
            choice: choice,
            note: note,
            time: timestamp
        };

        // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏∂‡πâ‡∏ô Firebase
        push(dbRef, newData)
            .then(() => {
                // ‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Result
                window.location.href = 'result.html';
            })
            .catch((error) => {
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
            });
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Admin)
    window.adminReset = function() {
        const password = prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:");
        if (password === "00000") {
            if(confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô Server ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
                remove(dbRef).then(() => {
                    alert("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥");
                });
            }
        } else if (password !== null) {
            alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!");
        }
    }

    // Theme Logic (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    const themeToggleBtn = document.getElementById('themeToggle');
    const htmlEl = document.documentElement;
    if (localStorage.getItem('theme') === 'dark') {
        htmlEl.setAttribute('data-theme', 'dark');
        themeToggleBtn.innerText = '‚òÄÔ∏è';
    }
    window.toggleTheme = function() {
        if (htmlEl.getAttribute('data-theme') === 'dark') {
            htmlEl.removeAttribute('data-theme');
            localStorage.setItem('theme', 'light');
            themeToggleBtn.innerText = 'üåô';
        } else {
            htmlEl.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            themeToggleBtn.innerText = '‚òÄÔ∏è';
        }
    }
</script>

</body>
</html>

